import{r as n,y as E,n as I,O as $,o as l,c as o,a as _,u as N,w as y,F as f,Z as O,j as w,e as z,v as B,i as T,f as c,p as d,B as j,t as v,G as A}from"./app-dd8571fb.js";import{_ as D}from"./AuthWithoutSidebarLayout-3b9d1bd0.js";import{B as F}from"./Box-53e3f365.js";import"./AuthenticatedLayout-49277159.js";import"./DropdownLink-4735ad2e.js";import"./_plugin-vue_export-helper-c27b6911.js";const Q={class:"absolute z-20 right-0 left-0 mx-auto text-white"},V={class:"absolute left-5 text-white"},G={class:"m-4 px-4"},L={key:0,class:"flex flex-col gap-4 text-center"},M=["onClick"],Z={key:1,class:"flex flex-col gap-4"},H={class:"col-span-8"},J={key:0,class:"col-span-4"},K={key:1,class:"col-span-4"},te={__name:"Quiz",props:{questions:Object,color:String,time:Number,gameId:Number},setup(e){const r=e,m=n(r.time),g=n(!0),h=n(0),p=n(0),x=n([]),a=n(null),k=n(0),q=()=>{r.questions.forEach(({id:s},u)=>{u==h.value&&(k.value=s)})};E(()=>{q()});const C=(s,u,i)=>{x.value.push({q_id:s,answer_id:u,is_correct:i}),a.value==null&&(a.value=u,g.value=!1),i==1&&p.value++},S=()=>{a.value=null,m.value=r.time,g.value=!0,h.value<r.questions.length-1?(h.value++,q()):$.patch(route("multi-player.result",r.gameId),{answers:x.value,corrects:p.value})};return I(m,s=>{s&&g.value?setTimeout(()=>{m.value--},1e3):a.value==null&&(a.value=1,x.value.push({q_id:k.value,is_correct:0}))},{immediate:!0}),history.pushState(null,null,location.href),window.onpopstate=()=>{alert("به دلیل تقلب تمام جواب های شما غلط محاسبه شده است.");const s=n([]);r.questions.forEach(({id:u},i)=>{s.value.push({q_id:u,is_correct:0})}),$.patch(route("multi-player.result",r.gameId),{answers:s.value})},window.onbeforeunload=function(){return"This is a kind of cheating!"},(s,u)=>(l(),o(f,null,[_(N(O),{title:"بازی تک نفره"}),_(D,null,{content:y(()=>[(l(!0),o(f,null,w(e.questions,(i,b)=>z((l(),T(F,{class:"container md:max-w-[50%] mx-auto relative",key:b},{default:y(()=>[c("div",{class:d(["absolute top-0 right-0 h-10 z-10",`bg-${e.color}`]),style:j(`width: ${(h.value+1)/e.questions.length*100}%`)},null,6),c("div",{class:d(["text-center text-white bg-opacity-40 font-bold shadow-sm h-10 leading-10 relative z-20",`bg-${e.color}`])},[c("p",Q," سوال "+v(b+1)+" از "+v(e.questions.length),1),c("p",V,v(m.value),1)],2),c("div",{class:d(["my-8 font-bold text-center",`text-${e.color}`])},v(i.text),3),c("ul",G,[a.value==null?(l(),o("div",L,[(l(!0),o(f,null,w(i.answers,t=>(l(),o("li",{key:t.unique_id,onClick:P=>C(i.id,t.unique_id,t.is_correct),class:d(["text-center w-full hover:bg-opacity-100 bg-opacity-20 py-2 font-bold hover:text-white cursor-pointer",`hover:bg-${e.color} bg-${e.color} text-${e.color}`])},v(t.text),11,M))),128))])):(l(),o("div",Z,[(l(!0),o(f,null,w(i.answers,t=>(l(),o("li",{key:t.unique_id,class:d(["py-2 font-bold text-white grid grid-cols-12 text-center",t.is_correct==1&&t.unique_id?"bg-green-500":"bg-red-500 opacity-50",{"!opacity-100":a.value==t.unique_id}])},[c("div",H,v(t.text),1),t.is_correct==!0?(l(),o("div",J," درست ")):(l(),o("div",K,"اشتباه"))],2))),128))]))]),_(A,{name:"fade"},{default:y(()=>[z(c("button",{class:d(["btn-primary border-2 block mr-auto ml-4 my-8 font-bold",`bg-${e.color} hover:border-${e.color} hover:text-${e.color}`]),onClick:S}," بعدی ",2),[[B,a.value]])]),_:1})]),_:2},1024)),[[B,b==h.value]])),128))]),_:1})],64))}};export{te as default};
